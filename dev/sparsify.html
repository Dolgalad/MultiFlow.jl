<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MCF Sparsification · MultiFlows.jl</title><meta name="title" content="MCF Sparsification · MultiFlows.jl"/><meta property="og:title" content="MCF Sparsification · MultiFlows.jl"/><meta property="twitter:title" content="MCF Sparsification · MultiFlows.jl"/><meta name="description" content="Documentation for MultiFlows.jl."/><meta property="og:description" content="Documentation for MultiFlows.jl."/><meta property="twitter:description" content="Documentation for MultiFlows.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/extra_styles.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">MultiFlows.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">First steps</span><ul><li><a class="tocitem" href="index.html">MultiFlows.jl</a></li></ul></li><li><span class="tocitem">Core API</span><ul><li><a class="tocitem" href="core_functions/feature_graph.html">Feature Graph</a></li><li><a class="tocitem" href="core_functions/path.html">Paths</a></li></ul></li><li><span class="tocitem">Multi-Commodity Flows</span><ul><li><a class="tocitem" href="mcf/mcf.html">Multi-Commodity Flow</a></li><li><a class="tocitem" href="mcf/io.html">Reading/writing MCFs</a></li><li><a class="tocitem" href="mcf/plot.html">Plotting</a></li></ul></li><li><span class="tocitem">Solvers</span><ul><li><a class="tocitem" href="solvers/solver_statistics.html">Solver Statistics</a></li><li><a class="tocitem" href="solvers/heuristic_solver.html">Heuristics</a></li><li><a class="tocitem" href="solvers/compact_solver.html">Solving Compact Formulation</a></li><li><a class="tocitem" href="solvers/column_generation.html">Column Generation</a></li></ul></li><li><span class="tocitem">Datasets</span><ul><li><a class="tocitem" href="datasets/description.html">Datasets</a></li><li><a class="tocitem" href="datasets/generators.html">Instance generation</a></li></ul></li><li><span class="tocitem">Sparsification</span><ul><li class="is-active"><a class="tocitem" href="sparsify.html">MCF Sparsification</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Compact-formulation-reduction"><span>Compact formulation reduction</span></a></li><li><a class="tocitem" href="#MCF-Pricing-sparsification"><span>MCF Pricing sparsification</span></a></li><li><a class="tocitem" href="#Sparsification-methods"><span>Sparsification methods</span></a></li><li><a class="tocitem" href="#Full-docs"><span>Full docs</span></a></li></ul></li><li><a class="tocitem" href="ml_sparsify.html">Machine Learning</a></li></ul></li><li><span class="tocitem">Installation and development</span><ul><li><a class="tocitem" href="development.html">Installation and Development</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Sparsification</a></li><li class="is-active"><a href="sparsify.html">MCF Sparsification</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="sparsify.html">MCF Sparsification</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Dolgalad/MultiFlows.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Dolgalad/MultiFlows.jl/blob/main/docs/src/sparsify.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="MCF-Sparsification"><a class="docs-heading-anchor" href="#MCF-Sparsification">MCF Sparsification</a><a id="MCF-Sparsification-1"></a><a class="docs-heading-anchor-permalink" href="#MCF-Sparsification" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="sparsify.html#MultiFlows.AbstractSparsifier"><code>MultiFlows.AbstractSparsifier</code></a></li><li><a href="sparsify.html#MultiFlows.SPSparsifier"><code>MultiFlows.SPSparsifier</code></a></li><li><a href="sparsify.html#MultiFlows.sparsify-Union{Tuple{N}, Tuple{T}, Tuple{MCF{T, N}, SPSparsifier}} where {T, N}"><code>MultiFlows.sparsify</code></a></li><li><a href="sparsify.html#MultiFlows.sparsify-Union{Tuple{N}, Tuple{T}, Tuple{MCF{T, N}, AbstractSparsifier}} where {T, N}"><code>MultiFlows.sparsify</code></a></li></ul><p>Sparsification if the process of identifying variables that can be eliminated from the problem resulting in a smaller model that is easier to solve than the original. MCF solutions are notorious for using a very small portion of the graph from routing the demands, i.e. many of the arc-demand variables <span>$x_a^k$</span> have zero value. Properly identifying regions of the graph that either have very small or very important probability of belonging to the solution can lead to a significant increase in solver performance, but in general this is not an easy task. </p><p>We call a <strong>sparsifier</strong> a function <span>$\gamma$</span> taking as input an MCF instance <span>$\mathcal{I}$</span> defined over graph <span>$G=(V,A)$</span> and with demands <span>$K$</span>. The sparsifier outputs a <span>$0-1$</span>-matrix <span>$S = (s_{ka})_{k\in K, a\in A} := \gamma (\mathcal{I})$</span> of dimension <span>$|K| \times |A|$</span> where <span>$S_{ka} = 0$</span> means that variable <span>$x_a^k$</span> can be set to <span>$0$</span>.</p><p>The <em>MultiFlows.jl</em> package offers a general framework for defining such sparsifier and integrating them into MCF problem solvers. Applications of sparsification include : </p><ul><li>reducing the size of the compact formulation model</li><li>sparsifying the pricing problem in column generation</li></ul><img class="display-light-only" src="./assets/img/sparsify_light.png" alt="India35 Sparsification"/>
<img class="display-dark-only" src="./assets/img/sparsify_dark.png" alt="India35 Sparsification"/><h2 id="Compact-formulation-reduction"><a class="docs-heading-anchor" href="#Compact-formulation-reduction">Compact formulation reduction</a><a id="Compact-formulation-reduction-1"></a><a class="docs-heading-anchor-permalink" href="#Compact-formulation-reduction" title="Permalink"></a></h2><p>The <strong>Sparse Compact Formulation</strong> of an MCF problem is defined as in <a href="mcf/mcf.html#Arc-flow-formulation">Arc-flow formulation</a> where additional constraints are added : </p><p class="math-container">\[x_a^k = 0 \quad \forall k \in K, a\in A, s_{ka} = 0\]</p><p>The resulting problem is solved using state of the art solvers. </p><h2 id="MCF-Pricing-sparsification"><a class="docs-heading-anchor" href="#MCF-Pricing-sparsification">MCF Pricing sparsification</a><a id="MCF-Pricing-sparsification-1"></a><a class="docs-heading-anchor-permalink" href="#MCF-Pricing-sparsification" title="Permalink"></a></h2><p>For MCF problems the pricing problem involes searching for each demand <span>$k$</span> a shortest-path. Although shortest-paths algorithms are efficient they may spend unnecessary time visiting parts of the graph that could not possibly belong to the solution. Reducing the graph size for each demand such that it only contains promising arcs can lead to performance increase without degrading the quality of the solution.</p><p>Given a demand <span>$k$</span> we define the <strong>sparse graph</strong> <span>$G_k = (V, A_k)$</span> where <span>$A_k = \{a \in A | s_{ka} = 1 \}$</span>. <span>$G_k$</span> is then used for solving the pricing problem. </p><h2 id="Sparsification-methods"><a class="docs-heading-anchor" href="#Sparsification-methods">Sparsification methods</a><a id="Sparsification-methods-1"></a><a class="docs-heading-anchor-permalink" href="#Sparsification-methods" title="Permalink"></a></h2><p>Some sparsification techniques that we have implemented : </p><ul><li>SP sparsification : for each <span>$k$</span> we set <span>$s_{ka} = 1$</span> if <span>$a$</span> belongs to at least one of the <span>$L$</span> <span>$s_k,t_k$</span>-shortest-paths. This requires either computing at solve time <span>$L$</span> shortest-paths for each demand or knowing such paths in advance.</li><li>ML sparsification : an sparsification model can be trained by supervised learning to approximately identify promising parts of the graph. </li></ul><h2 id="Full-docs"><a class="docs-heading-anchor" href="#Full-docs">Full docs</a><a id="Full-docs-1"></a><a class="docs-heading-anchor-permalink" href="#Full-docs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.AbstractSparsifier" href="#MultiFlows.AbstractSparsifier"><code>MultiFlows.AbstractSparsifier</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSparsifier</code></pre><p>Abstract type shared by all Sparsifier models. These are objects who implement the <a href="ml_sparsify.html#MultiFlows.sparsify-Tuple{MCF, MultiFlows.ML.M8MLSparsifier}"><code>sparsify(sprs::AbstractSparsifier, pb::MCF)</code></a> that returns a <code>(ne(pb), nk(pb))</code> 0-1-matrix where if <code>M[a,k]==1</code> arc <span>$a$</span> is classifier as being used to route demand <span>$k$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/a13943c3a501a84b5fac141c882903afd26c8e7b/src/sparsify.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.SPSparsifier" href="#MultiFlows.SPSparsifier"><code>MultiFlows.SPSparsifier</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SPSparsifier</code></pre><p>Shortest Path Sparsifier. For each demand will keep only arcs belonging to the <span>$k$</span> shortest paths.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/a13943c3a501a84b5fac141c882903afd26c8e7b/src/sparsify.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.sparsify-Union{Tuple{N}, Tuple{T}, Tuple{MCF{T, N}, AbstractSparsifier}} where {T, N}" href="#MultiFlows.sparsify-Union{Tuple{N}, Tuple{T}, Tuple{MCF{T, N}, AbstractSparsifier}} where {T, N}"><code>MultiFlows.sparsify</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sparsify(pb::MCF, sprs::AbstractSparsifier)</code></pre><p>Produces the arc-demand classification result. This function needs to be defined for each type of sparsifier.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/a13943c3a501a84b5fac141c882903afd26c8e7b/src/sparsify.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.sparsify-Union{Tuple{N}, Tuple{T}, Tuple{MCF{T, N}, SPSparsifier}} where {T, N}" href="#MultiFlows.sparsify-Union{Tuple{N}, Tuple{T}, Tuple{MCF{T, N}, SPSparsifier}} where {T, N}"><code>MultiFlows.sparsify</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sparsify(pb::MCF{T,N}, sprs::SPSparsifier) where {T,N}</code></pre><p>Sparsify the MCF <code>pb</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/a13943c3a501a84b5fac141c882903afd26c8e7b/src/sparsify.jl#L26-L31">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="datasets/generators.html">« Instance generation</a><a class="docs-footer-nextpage" href="ml_sparsify.html">Machine Learning »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Saturday 2 March 2024 19:46">Saturday 2 March 2024</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
