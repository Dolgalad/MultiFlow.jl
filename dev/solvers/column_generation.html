<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Column Generation · MultiFlows.jl</title><meta name="title" content="Column Generation · MultiFlows.jl"/><meta property="og:title" content="Column Generation · MultiFlows.jl"/><meta property="twitter:title" content="Column Generation · MultiFlows.jl"/><meta name="description" content="Documentation for MultiFlows.jl."/><meta property="og:description" content="Documentation for MultiFlows.jl."/><meta property="twitter:description" content="Documentation for MultiFlows.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/extra_styles.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">MultiFlows.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">First steps</span><ul><li><a class="tocitem" href="../index.html">MultiFlows.jl</a></li></ul></li><li><span class="tocitem">Core API</span><ul><li><a class="tocitem" href="../core_functions/feature_graph.html">Feature Graph</a></li><li><a class="tocitem" href="../core_functions/path.html">Paths</a></li></ul></li><li><span class="tocitem">Multi-Commodity Flows</span><ul><li><a class="tocitem" href="../mcf/mcf.html">Multi-Commodity Flow</a></li><li><a class="tocitem" href="../mcf/io.html">Reading/writing MCFs</a></li><li><a class="tocitem" href="../mcf/plot.html">Plotting</a></li></ul></li><li><span class="tocitem">Solvers</span><ul><li><a class="tocitem" href="solver_statistics.html">Solver Statistics</a></li><li><a class="tocitem" href="heuristic_solver.html">Heuristics</a></li><li><a class="tocitem" href="compact_solver.html">Solving Compact Formulation</a></li><li class="is-active"><a class="tocitem" href="column_generation.html">Column Generation</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Full-docs"><span>Full docs</span></a></li></ul></li></ul></li><li><span class="tocitem">Datasets</span><ul><li><a class="tocitem" href="../datasets/description.html">Datasets</a></li><li><a class="tocitem" href="../datasets/generators.html">Instance generation</a></li></ul></li><li><span class="tocitem">Sparsification</span><ul><li><a class="tocitem" href="../sparsify.html">MCF Sparsification</a></li><li><a class="tocitem" href="../ml_sparsify.html">Machine Learning</a></li></ul></li><li><span class="tocitem">Installation and development</span><ul><li><a class="tocitem" href="../development.html">Installation and Development</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Solvers</a></li><li class="is-active"><a href="column_generation.html">Column Generation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="column_generation.html">Column Generation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Dolgalad/MultiFlows.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Dolgalad/MultiFlows.jl/blob/main/docs/src/solvers/column_generation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Column-Generation"><a class="docs-heading-anchor" href="#Column-Generation">Column Generation</a><a id="Column-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Column-Generation" title="Permalink"></a></h1><img class="display-light-only" src="../assets/img/cg_light.png" alt="Column Generation"/>
<img class="display-dark-only" src="../assets/img/cg_dark.png" alt="Column Generation"/><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="column_generation.html#MultiFlows.MCFPricingProblem"><code>MultiFlows.MCFPricingProblem</code></a></li><li><a href="column_generation.html#MultiFlows.MCFPricingProblem-Tuple{MCF}"><code>MultiFlows.MCFPricingProblem</code></a></li><li><a href="column_generation.html#MultiFlows.MCFRestrictedMasterProblem"><code>MultiFlows.MCFRestrictedMasterProblem</code></a></li><li><a href="column_generation.html#MultiFlows.MCFRestrictedMasterProblem-Tuple{MCF}"><code>MultiFlows.MCFRestrictedMasterProblem</code></a></li><li><a href="column_generation.html#MultiFlows.add_column!-Union{Tuple{N}, Tuple{MCFRestrictedMasterProblem, Int64, Vector{Int64}, N, N}} where N&lt;:Number"><code>MultiFlows.add_column!</code></a></li><li><a href="column_generation.html#MultiFlows.make_pricing_graphs-Tuple{Vector{Int64}, Vector{Int64}, Vector, Union{Nothing, AbstractMatrix{Bool}}}"><code>MultiFlows.make_pricing_graphs</code></a></li><li><a href="column_generation.html#MultiFlows.reduced_cost_graph-Tuple{MCFPricingProblem, Int64}"><code>MultiFlows.reduced_cost_graph</code></a></li><li><a href="column_generation.html#MultiFlows.solution_from_rmp-Tuple{MCFRestrictedMasterProblem, MCF}"><code>MultiFlows.solution_from_rmp</code></a></li><li><a href="column_generation.html#MultiFlows.solve!-Tuple{MCFPricingProblem}"><code>MultiFlows.solve!</code></a></li><li><a href="column_generation.html#MultiFlows.solve!-Tuple{MCFRestrictedMasterProblem}"><code>MultiFlows.solve!</code></a></li><li><a href="column_generation.html#MultiFlows.solve_column_generation-Tuple{MCF}"><code>MultiFlows.solve_column_generation</code></a></li><li><a href="column_generation.html#MultiFlows.update_pricing_problem!-Tuple{MCFPricingProblem, Any, Any}"><code>MultiFlows.update_pricing_problem!</code></a></li></ul><h2 id="Full-docs"><a class="docs-heading-anchor" href="#Full-docs">Full docs</a><a id="Full-docs-1"></a><a class="docs-heading-anchor-permalink" href="#Full-docs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.MCFPricingProblem" href="#MultiFlows.MCFPricingProblem"><code>MultiFlows.MCFPricingProblem</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MCFPricingProblem{T&lt;:Number,N&lt;:Number,F&lt;:Union{Nothing,AbstractMatrix{Bool}}}</code></pre><p>MCF Pricing problem data container.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L82-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.MCFPricingProblem-Tuple{MCF}" href="#MultiFlows.MCFPricingProblem-Tuple{MCF}"><code>MultiFlows.MCFPricingProblem</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">MCFPricingProblem(pb::MCF; filter::Union{Nothing,AbstractMatrix{Bool}}=nothing)</code></pre><p>Pricing problem constructor for problem <code>pb</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; prp = MCFPricingProblem(pb)
MCFPricingProblem{Int64, Int64, Nothing}([1, 1, 2, 4, 2, 3, 4, 6, 1, 5], [4, 2, 4, 7, 3, 4, 6, 7, 5, 7], Demand{Int64, Int64}[Demand{Int64, Int64}(1, 7, 5), Demand{Int64, Int64}(2, 6, 5), Demand{Int64, Int64}(3, 7, 5)], [2, 3, 3, 8, 4, 8, 3, 3, 80, 20], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0], nothing, {7, 10} directed simple Int64 graph with Int64 weights)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L99-L110">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.MCFRestrictedMasterProblem" href="#MultiFlows.MCFRestrictedMasterProblem"><code>MultiFlows.MCFRestrictedMasterProblem</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MCFRestrictedMasterProblem</code></pre><p>Concrete type representing the MCF Restricted Master Problem data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.MCFRestrictedMasterProblem-Tuple{MCF}" href="#MultiFlows.MCFRestrictedMasterProblem-Tuple{MCF}"><code>MultiFlows.MCFRestrictedMasterProblem</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">MCFRestrictedMasterProblem(pb::MCF;
                                direct::Bool=true,
                                optimizer::DataType=HiGHS.Optimizer,
                                timelimit::Union{Nothing,Real}=nothing,
                                bigM_f::Function=p-&gt;sum(costs(p))
)</code></pre><p>Initialize the RMP for MCF problem <code>pb</code>. If <code>direct=true</code> the LP solver is used in direct mode.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; pb = load(&quot;../instances/toytests/test1&quot;)
MCF(nv = 7, ne = 10, nk = 3)
	Demand{Int64, Int64}(1, 7, 5)
	Demand{Int64, Int64}(2, 6, 5)
	Demand{Int64, Int64}(3, 7, 5)

julia&gt; rmp = MCFRestrictedMasterProblem(pb);

julia&gt; typeof(rmp.model)
Model (alias for GenericModel{Float64})
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L11-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.add_column!-Union{Tuple{N}, Tuple{MCFRestrictedMasterProblem, Int64, Vector{Int64}, N, N}} where N&lt;:Number" href="#MultiFlows.add_column!-Union{Tuple{N}, Tuple{MCFRestrictedMasterProblem, Int64, Vector{Int64}, N, N}} where N&lt;:Number"><code>MultiFlows.add_column!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_column!(rmp::MCFRestrictedMasterProblem, k::Int64, column::Vector{Int64}, demand_amount::Float64, column_weight::Float64)</code></pre><p>Add column for demand <code>k</code> to the master problem. <code>column</code> is a path <span>$p$</span> represented by a sequence of edges, a new variable <span>$x^k_p$</span> is added to the master problem, the capacity and convexity constraints are updated to take the new variable into account as well as the objective function.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; num_variables(rmp.model)
3

julia&gt; rmp.model[:capacity]
10-element Vector{ConstraintRef{Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.LessThan{Float64}}, ScalarShape}}:
 capacity[1] : 0 ≤ 6
 capacity[2] : 0 ≤ 12
 capacity[3] : 0 ≤ 12
 capacity[4] : 0 ≤ 5
 capacity[5] : 0 ≤ 11
 capacity[6] : 0 ≤ 20
 capacity[7] : 0 ≤ 10
 capacity[8] : 0 ≤ 20
 capacity[9] : 0 ≤ 10
 capacity[10] : 0 ≤ 10

julia&gt; rmp.model[:convexity]
3-element Vector{ConstraintRef{Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.EqualTo{Float64}}, ScalarShape}}:
 convexity[1] : y1 = 1
 convexity[2] : y2 = 1
 convexity[3] : y3 = 1

julia&gt; objective_function(rmp.model)
670 y1 + 670 y2 + 670 y3
</code></pre><p>Now lets find a path to add to the RMP for demand <code>k=1</code> and convert it to column format i.e. Vector of edge indices.</p><pre><code class="language-julia-repl hljs">julia&gt; p = VertexPath(enumerate_paths(dijkstra_shortest_paths(pb.graph, 1), 7))
VertexPath{Int64}([1, 4, 6, 7])

julia&gt; column = edge_indices(p, pb.graph)
3-element Vector{Int64}:
 1
 7
 8

julia&gt; pw = path_weight(p, pb.graph)
8</code></pre><p>Now we add the column to the RMP : </p><pre><code class="language-julia-repl hljs">julia&gt; add_column!(rmp, 1, column, pb.demands[1].amount, pw)

julia&gt; rmp.model[:capacity]
10-element Vector{ConstraintRef{Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.LessThan{Float64}}, ScalarShape}}:
 capacity[1] : 5 x1[1] ≤ 6
 capacity[2] : 0 ≤ 12
 capacity[3] : 0 ≤ 12
 capacity[4] : 0 ≤ 5
 capacity[5] : 0 ≤ 11
 capacity[6] : 0 ≤ 20
 capacity[7] : 5 x1[1] ≤ 10
 capacity[8] : 5 x1[1] ≤ 20
 capacity[9] : 0 ≤ 10
 capacity[10] : 0 ≤ 10

julia&gt; rmp.model[:convexity]
3-element Vector{ConstraintRef{Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.EqualTo{Float64}}, ScalarShape}}:
 convexity[1] : y1 + x1[1] = 1
 convexity[2] : y2 = 1
 convexity[3] : y3 = 1

julia&gt; objective_function(rmp.model)
670 y1 + 670 y2 + 670 y3 + 40 x1[1]
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L158-L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.make_pricing_graphs-Tuple{Vector{Int64}, Vector{Int64}, Vector, Union{Nothing, AbstractMatrix{Bool}}}" href="#MultiFlows.make_pricing_graphs-Tuple{Vector{Int64}, Vector{Int64}, Vector, Union{Nothing, AbstractMatrix{Bool}}}"><code>MultiFlows.make_pricing_graphs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">make_pricing_graphs(srcs::Vector{Int64}, dsts::Vector{Int64}, csts::Vector, filter::Union{Nothing,AbstractMatrix{Bool}})</code></pre><p>Prepare the graphs used for solving the pricing problem. If <code>filter=nothing</code> there is only one graph created, otherwise one graph is created for each column in <code>filter</code> (i.e. one graph for each demand).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L67-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.reduced_cost_graph-Tuple{MCFPricingProblem, Int64}" href="#MultiFlows.reduced_cost_graph-Tuple{MCFPricingProblem, Int64}"><code>MultiFlows.reduced_cost_graph</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reduced_cost_graph(prp::MCFPricingProblem, k::Int64)</code></pre><p>Get the graph used for solving the pricing problem for demand <code>k</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L282-L286">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.solution_from_rmp-Tuple{MCFRestrictedMasterProblem, MCF}" href="#MultiFlows.solution_from_rmp-Tuple{MCFRestrictedMasterProblem, MCF}"><code>MultiFlows.solution_from_rmp</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solution_from_rmp(rmp::MCFRestrictedMasterProblem, pb::MCF)</code></pre><p>Extract solution to the MCF problem <code>pb</code> from the solution of the RMP.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L331-L335">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.solve!-Tuple{MCFPricingProblem}" href="#MultiFlows.solve!-Tuple{MCFPricingProblem}"><code>MultiFlows.solve!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve!(prp::MCFPricingProblem)</code></pre><p>Solve the pricing problem. For each demand <code>k</code> search for an <span>$s_k-t_k$</span>-path on the graph with reduced edge costs <span>$c_a - \sigma_a$</span> where <span>$\sigma_a$</span> is the dual of the capacity constraint corresponding to edge <span>$a$</span>. A path <span>$p$</span> found this way are either added to the master problem if they satisfy the negative reduced cost condition <span>$b_k * (c_p - \sigma_a ) - \tau_k &lt; 0$</span>.</p><p><code>solve!(prp)</code> returns a list of columns which satisfy the previous condition.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; prp = MCFPricingProblem(pb);

julia&gt; update_pricing_problem!(prp, sigma, tau);

julia&gt; solve!(prp)
3-element Vector{Vector{VertexPath}}:
 [VertexPath{Int64}([1, 4, 6, 7])]
 [VertexPath{Int64}([2, 4, 6])]
 [VertexPath{Int64}([3, 4, 6, 7])]
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L295-L315">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.solve!-Tuple{MCFRestrictedMasterProblem}" href="#MultiFlows.solve!-Tuple{MCFRestrictedMasterProblem}"><code>MultiFlows.solve!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve!(rmp::MCFRestrictedMasterProblem)</code></pre><p>Solve the RMP. Calls <code>JuMP.optimize!(rmp.model)</code>. Returns the objective value and duals for the capacity and convexity constraints.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; obj, sigma, tau = solve!(rmp)
(2010.0, [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [670.0, 670.0, 670.0])
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L129-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.solve_column_generation-Tuple{MCF}" href="#MultiFlows.solve_column_generation-Tuple{MCF}"><code>MultiFlows.solve_column_generation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve_column_generation(pb::MCF;
                        max_unchanged::Int64=5,
                        max_iterations::Int64=100,
                        direct::Bool=true,
                        rmp_solve_callback::Function=(rmp) -&gt; (),
                        return_rmp::Bool=false,
                        optimizer::DataType=HiGHS.Optimizer,
                        timelimit::Union{Nothing,Real}=nothing,
                        pricing_filter::Union{Nothing,AbstractMatrix{Bool}}=nothing,
                        bigM_f::Function=p-&gt;sum(costs(p))

)</code></pre><p>Solve MCF problem using Column Generation. Returns a <a href="../mcf/mcf.html#MultiFlows.MCFSolution"><code>MCFSolution</code></a> object and  a <a href="solver_statistics.html#MultiFlows.SolverStatistics"><code>SolverStatistics</code></a> containing statistics from the solver run. If <code>return_rmp=true</code> the second return value is a tuple where the first item is the <code>JuMP.Model</code> corresponding to the final RMP and the second item are the solver statistics.</p><table><tr><th style="text-align: right"><strong>Argument</strong></th><th style="text-align: right"><strong>Description</strong></th></tr><tr><td style="text-align: right">max_unchanged</td><td style="text-align: right">Maximum number of successive iterations without improvement of the objective function</td></tr><tr><td style="text-align: right">max_iterations</td><td style="text-align: right">Maximum number of CG iterations</td></tr><tr><td style="text-align: right">direct</td><td style="text-align: right">Use direct solver</td></tr><tr><td style="text-align: right">rmp<em>solve</em>callback</td><td style="text-align: right">Function called after each resolution of the RMP</td></tr><tr><td style="text-align: right">return_rmp</td><td style="text-align: right">If true returns the <a href="column_generation.html#MultiFlows.MCFRestrictedMasterProblem"><code>MCFRestrictedMasterProblem</code></a></td></tr><tr><td style="text-align: right">optimizer</td><td style="text-align: right">Optimizer used</td></tr><tr><td style="text-align: right">timelimit</td><td style="text-align: right">Solve time limit in seconds</td></tr><tr><td style="text-align: right">pricing_filter</td><td style="text-align: right">Sparsifying matrix used during pricing</td></tr><tr><td style="text-align: right">bigM_f</td><td style="text-align: right">A function that takes the MCF instance and returns a real value</td></tr></table><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; sol, (rmp, ss) = solve_column_generation(pb, return_rmp=true);

julia&gt; value.(all_variables(rmp.model))
9-element Vector{Float64}:
  0.0
  0.0
  0.0
  0.0
  1.0
  1.0
  1.0
 -0.0
 -0.0

julia&gt; ss.stats[&quot;objective_value&quot;]
150.0
</code></pre><p>You may supply a callback function with the <code>rmp_solve_callback</code>. The supplied function must accept a single <a href="column_generation.html#MultiFlows.MCFRestrictedMasterProblem"><code>MCFRestrictedMasterProblem</code></a> argument and will be executed <code>rmp_solve_callback(rmp)</code> at each iteration before calling <code>solve!</code> on the pricing problem.</p><pre><code class="language-julia hljs">julia&gt; using Plots

julia&gt; pb = load(&quot;../instances/toytests/test1&quot;);

julia&gt; objvals = []
Any[]

julia&gt; function rmpcallback(rmp)
           push!(objvals, JuMP.objective_value(rmp.model))
       end

julia&gt; solve_column_generation(pb, rmp_solve_callback=rmpcallback);

julia&gt; savefig(plot(1:size(objvals,1), objvals, xlabel=&quot;Time&quot;, ylabel=&quot;Objective&quot;), &quot;callback_toytest1_cg.png&quot;);
</code></pre><p><img src="callback_toytest1_cg.png" alt/></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L351-L424">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MultiFlows.update_pricing_problem!-Tuple{MCFPricingProblem, Any, Any}" href="#MultiFlows.update_pricing_problem!-Tuple{MCFPricingProblem, Any, Any}"><code>MultiFlows.update_pricing_problem!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">update_pricing_problem!(prp::MCFPricingProblme, capacity_duals::Vector{Float64}, convexity_duals::Vector{Float64}</code></pre><p>Update the pricing problem data. Sets the values of the capacity and convexity constraint duals to the latest values given by solving the RMP.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dolgalad/MultiFlows.jl/blob/340ee010e8b6c43e522430adddbb203e95bdbabf/src/solvers/column_generation.jl#L263-L267">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="compact_solver.html">« Solving Compact Formulation</a><a class="docs-footer-nextpage" href="../datasets/description.html">Datasets »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Thursday 29 February 2024 09:12">Thursday 29 February 2024</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
